<!-- locals: article -->

<h1><%= strip_tags(article.title) %></h1>
<h2><%= strip_tags(article.sub_title) %></h2>
<h3>Published in <%= link_to article.gazette.name, gazette_articles_url(article.gazette) %></h3>

<!-- We want to display the article's html tags -->
<p><%= raw(article.content) %></p>

<% article.photos.each do |photo| %>
  <%= link_to image_tag(@photos_dir + photo.select_fichier("thumbnail").filename,
    class: 'photo-thumbnail'), photo_path(photo) %>
<% end %>

<div class="commentary">
	<h2>Comments</h2>
	<table>
		<% article.comments.select { |c| c.id != nil }.each do |comment| %>
		<% comment_date = comment.created_at.localtime.strftime("%b %-d at %-H:%-M") %>
			<tr>
				<td><%= strip_tags(comment.content) %> â€“ by <span class="user"><%= strip_tags(comment.user) %></span> on <span class="date"><%= strip_tags(comment_date) %></span></td>
			</tr>
		<% end %>
	</table>
	<div>
		<p id="notice"><%= notice %></p>
		
		<button id="add-comment-button">New comment</button>
		<div id="new-comment">
			<%= render partial: 'comments/form', locals: { commentable: article } %>
		</div>
	</div>
</div>